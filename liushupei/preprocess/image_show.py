from PIL import Image
import os
import pandas as pd


def rle_to_mask():
    img = Image.open(os.path.dirname(os.getcwd()) + "\\data\\3.jpg")
    img = img.convert('L')
    data = img.load()
    width, height = img.size

    mask = "276393 4 277161 12 277929 19 278697 27 279464 35 280232 42 281000 50 281768 54 282536 54 283304 54 284072 54 284839 54 285607 54 286375 54 287143 54 287911 54 288679 54 289447 54 290214 55 290982 54 291750 54 292518 54 293286 54 294054 54 294822 54 295589 55 296357 54 297125 54 297893 54 298661 54 299429 54 300197 54 300965 54 301732 54 302500 54 303268 54 304036 54 304804 54 305572 54 306340 54 307107 55 307875 54 308643 54 309411 54 310179 54 310947 54 311715 54 312482 55 313250 54 314018 54 314786 54 315554 54 316322 54 317090 54 317857 55 318625 54 319393 54 320161 54 320929 54 321697 54 322465 54 323232 55 324000 55 324768 54 325536 54 326304 54 327072 54 327840 54 328607 55 329375 55 330143 54 330911 54 331679 54 332447 54 333215 54 333982 55 334750 55 335518 54 336286 54 337054 54 337822 54 338590 54 339357 55 340125 55 340893 55 341661 54 342429 54 343197 54 343965 54 344733 54 345500 55 346268 55 347036 54 347804 54 348572 54 349340 54 350108 54 350875 55 351643 55 352411 54 353179 54 353947 54 354715 54 355483 54 356250 55 357018 55 357786 55 358554 54 359322 54 360090 54 360858 54 361625 55 362393 55 363161 55 363929 54 364697 54 365465 54 366233 54 367000 55 367768 55 368536 55 369304 54 370072 54 370840 54 371608 54 372375 55 373143 55 373911 55 374679 55 375447 54 376215 54 376983 54 377750 55 378518 55 379286 55 380054 55 380822 54 381590 54 382358 54 383126 54 383893 55 384661 55 385429 55 386197 54 386965 54 387733 54 388501 54 389268 55 390036 55 390804 55 391572 55 392340 54 393108 54 393876 54 394643 55 395411 55 396179 55 396947 55 397715 54 398483 54 399251 54 400018 55 400786 55 401554 55 402322 55 403090 54 403858 54 404626 54 405393 55 406161 55 406929 55 407697 55 408465 55 409233 54 410001 54 410768 55 411536 55 412304 55 413072 55 413840 55 414608 54 415376 54 416143 55 416911 55 417679 55 418447 55 419215 55 419983 54 420751 54 421518 55 422286 55 423054 55 423822 55 424590 55 425358 55 426126 54 426894 54 427661 55 428429 55 429197 55 429965 55 430733 55 431501 54 432269 54 433036 55 433804 55 434572 55 435340 55 436108 55 436876 54 437644 54 438411 55 439179 55 439947 55 440715 55 441483 55 442251 55 443019 54 443786 55 444554 55 445322 55 446090 55 446858 55 447626 55 448394 54 449161 55 449929 55 450697 55 451465 55 452233 55 453001 55 453769 54 454536 55 455304 55 456072 55 456840 55 457608 55 458376 55 459144 55 459911 55 460679 55 461447 55 462215 55 462983 55 463751 55 464519 55 465286 55 466054 55 466822 55 467590 55 468358 55 469126 55 469894 55 470662 54 471429 55 472197 55 472965 55 473733 55 474501 55 475269 55 476037 55 476804 55 477572 55 478340 55 479108 55 479876 55 480644 55 481412 55 482179 55 482947 55 483715 55 484483 55 485251 55 486019 55 486787 55 487554 55 488322 55 489090 55 489858 55 490630 51 491404 45 492179 38 492954 31 493728 24 494503 17 495278 10 496052 4".split(
        ' ')
    masks = []
    for i in range(0, len(mask), 2):
        for j in range(int(mask[i + 1])):
            masks.append(int(mask[i]) + j)

    index = 0
    for i in range(width):
        for j in range(height):
            if index < len(masks) and i * height + j == masks[index]:
                data[i, j] = 255
                index += 1
            else:
                data[i, j] = 0

    img.show()


def rle_to_mask2(img, mask):
    width, height = img.size
    img_copy = Image.new('L', (width, height))
    data = img_copy.load()

    mask = mask.split(' ')
    masks = []
    for i in range(0, len(mask), 2):
        for j in range(int(mask[i + 1])):
            masks.append(int(mask[i]) + j)

    index = 0
    for i in range(width):
        for j in range(height):
            if index < len(masks) and i * height + j == masks[index]:
                data[i, j] = 255
                index += 1
            else:
                data[i, j] = 0

    img.show()
    img_copy.show()


# results = pd.read_csv(os.path.dirname(os.getcwd()) + "\\data\\data.csv")
# img = Image.open(os.path.dirname(os.getcwd()) + "\\data\\0a76d7f1d.jpg")
# mask = results["EncodedPixels"][results["ImageId"] == "0a76d7f1d.jpg"].values[0]
# rle_to_mask2(img, mask)
